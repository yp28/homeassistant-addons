extensions:
  health_check:

receivers:
  docker_stats:
    metrics:
      container.cpu.percent:
        enabled: false
      container.cpu.utilization:
        enabled: true
  journald:
    directory: /var/log/journal
    operators:
      - type: move
        from: body
        to: attributes["body"]
      - type: flatten
        field: attributes["body"]
      - type: move
        from: attributes["MESSAGE"]
        to: body
      - type: add
        field: service.name
        value: homeassistant

processors:
  batch:

exporters:
  debug:
    verbosity: basic
  otlphttp:
    endpoint: https://otel.example.com

service:
  pipelines:
    logs:
      receivers: [journald]
      processors: [batch]
      exporters: [debug, otlphttp]
    metrics:
      receivers: [docker_stats]
      processors: [batch]
      exporters: [debug, otlphttp]
  extensions: [health_check]
